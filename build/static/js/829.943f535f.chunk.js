"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[829,387,935],{4935:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d,useChats:()=>i});var t=a(5773);const n=[{type:"bot",seq:0,message:"\u6b22\u8fce\u5149\u4e34\uff0c\u8bf7\u4f7f\u7528\u60a8\u7684Github\u8d26\u53f7\u767b\u5f55."}];var r=a(6345);const l=(0,t.createContext)(),i=()=>(0,t.useContext)(l),d=e=>{let{children:s}=e;const[a,i]=(0,t.useState)(n),[d,c]=(0,t.useState)("");return(0,r.jsx)(l.Provider,{value:{data:a,onAddNewMessage:e=>{let{message:s,chatId:t,seq:n,type:r,esentials:l,selected:d}=e;i([...a,{chatId:t,seq:n,message:s,type:r,esentials:l,selected:d}])},onAddNewMessages:e=>{i(e)},clearMessages:()=>{i([])},login:d,onLogin:e=>{c(e)}},children:s})}},387:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D});var t=a(4119),n=(a(6793),a(5773));const r=e=>{const[s,a]=(0,n.useState)(),[t,r]=(0,n.useState)(),[l,i]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{i(!0),fetch(e,{headers:{}}).then((e=>e.json())).then((e=>{a(e)})).then((()=>i(!1))).catch(r)}),[e]),{data:s,error:t,loading:l}};var l=a(6345);const i=e=>{let{login:s}=e;if(!s)return null;var{data:a,loading:t,error:n}=r("https://api.github.com/users/".concat(s));return t?(0,l.jsx)("h1",{children:"Loading..."}):n?(0,l.jsx)("pre",{children:JSON.stringify(n,null,2)}):a?(0,l.jsx)("div",{style:{marginRight:"50px"},children:(0,l.jsx)("p",{style:{float:"right"},children:(0,l.jsx)("img",{style:{width:"30px",lineHeight:"30px",borderRadius:"50%"},alt:a?a.login:"",src:a?a.avatar_url:""})})}):null};var d=a(4935);const c=()=>{const{login:e}=(0,d.useChats)();return(0,n.useEffect)((()=>{console.log(e)}),[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"chat-header",children:[(0,l.jsx)("div",{className:"chat-recipient"}),(0,l.jsx)("div",{className:"chat-menu",children:(0,l.jsx)("div",{style:{float:"left"},children:(0,l.jsx)(i,{login:e})})})]}),(0,l.jsx)(t.EbaySvg,{})]})};var o=a(6325),h=a(6203);const u=e=>{let{message:s,addNewMessage:a}=e;const[t,r]=(0,n.useState)(null);return(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:s}),(0,l.jsx)(h.A,{className:"dt-picker",onChange:e=>{r(e),a(e.format("DD-MM-YYYY"))},value:t,format:["DD/MM/YYYY","DD/MM/YY","DD-MM-YYYY","DD-MM-YY"]})]})},m=e=>{let{message:s}=e;return(0,l.jsx)("p",{children:(0,l.jsx)("div",{children:s})})};var g=a(9332),x=a(7411),p=a(4891);a(2774);const y=e=>{let{message:s,keyName:a,esentials:t,readyFn:r}=e;const[i,d]=(0,n.useState)(t.map((()=>({priority:"tertiary"}))));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:s}),(0,l.jsx)("div",{className:"message",children:t.map(((e,s)=>(0,l.jsx)(p.EbayButton,{onClick:()=>(e=>{const s=[...i];s[e].priority="primary"==s[e].priority?"tertiary":"primary",d(s),r(e,a)})(s),priority:i[s].priority,style:{margin:"3px"},children:e},s)))})]})},j=e=>{let{message:s,next:a}=e;return(0,l.jsxs)("p",{children:[(0,l.jsx)("div",{children:(0,l.jsx)("span",{style:{marginRight:"50px"},children:s})}),(0,l.jsxs)("div",{style:{marginTop:"5px"},children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("i",{style:{textDecoration:"underline",color:""},children:"Yes"}),"\xa0\xa0",(0,l.jsx)(o.EbayIcon,{name:"face-neutral24"})]}),(0,l.jsxs)("span",{style:{marginLeft:"40px"},onClick:a,children:[(0,l.jsx)("i",{style:{textDecoration:"underline"},children:"No, that is it for now"}),(0,l.jsx)(o.EbayIcon,{name:"on-the-way24"})]})]})]})},v=e=>{let{message:s}=e;return(0,l.jsx)("div",{className:"message",dangerouslySetInnerHTML:{__html:s}})};var f=a(4689);a(1090);const N=e=>{let{afterLogin:s}=e;const{onLogin:a}=(0,d.useChats)(),[r,i]=(0,n.useState)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(f.EbayTextbox,{placeholder:"test",value:r,onChange:e=>i(e.target.value)}),(0,l.jsx)(p.EbayButton,{onClick:()=>(a(r),void s(r)),children:"\u767b\u5f55"})]}),(0,l.jsx)(t.EbaySvg,{})]})},b=e=>{let{text:s,afterLogin:a}=e;return(0,l.jsx)("div",{className:"login-message",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:s}),(0,l.jsx)("div",{className:"seach-form",children:(0,l.jsx)(N,{afterLogin:a})})]})})},k=e=>{let{message:s,keyName:a,seq:r,type:i,esentials:c}=e;var h,{data:p,onAddNewMessage:f,onAddNewMessages:N}=(0,d.useChats)();(0,n.useEffect)((()=>{const e=new URLSearchParams(window.location.search);h=e.get(x.Xo)}),[]);var[k,E]=(0,n.useState)({});(0,n.useEffect)((()=>{k&&Object.keys(k).length>0&&f(k)}),[k]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bot-message",children:[(0,l.jsx)("div",{className:"ai-icon",children:(0,l.jsx)(o.EbayIcon,{name:"aiSpectrumFilled24Colored"})}),0===r?(0,l.jsx)(b,{text:s,afterLogin:e=>{E({message:"Hey ".concat(e,", Please enter the due/birth date of your little one to receive tailored buying & selling suggestions for pre-loved children's products."),seq:1,type:"bot"})}}):null,1===r?(0,l.jsx)(u,{message:s,seq:r,type:i,addNewMessage:async e=>{E({message:e,seq:2,type:"user"});var s=await(0,g.J)("".concat(x.ED.BIRTHDAY_URI),[{key:x.ED.BIRTHDAY_PARAM_KEY,value:e.replace(/-/g,"/")},{key:x.Xo,value:h}]);E({message:s.message,chatId:s.chatId,seq:3,type:"bot"}),setTimeout((()=>{E({message:s.question,chatId:s.chatId,seq:4,type:"bot",selected:[],esentials:s.data.answers})}),2e3)}}):null,3===r?(0,l.jsx)(m,{message:s}):null,4===r?(0,l.jsx)(y,{message:s,esentials:c,readyFn:e=>{p.some((e=>5===e.seq))||E({message:"Do you want to add more options?",seq:5,type:"bot"}),p.find((e=>4===e.seq)).selected.push(e)}}):null,5===r?(0,l.jsx)(j,{message:s,next:async()=>{var e=p.find((e=>4===e.seq)),s=e.selected,a=[];e.esentials.forEach(((e,t)=>{s.includes(t)&&a.push(e)}));var t=(await(0,g.J)("".concat(x.ED.DRILL_URL),[{key:x.ED.DRILL_PARAM_KEY,value:a.join(",")},{key:"chatId",value:e.chatId},{key:x.ED.USE_MOCK,value:h}])).data.map((e=>({message:e.question,seq:6,keyName:e.key,type:"bot",esentials:e.answers,selected:[]})));N([...p,...t])}}):null,6===r?(0,l.jsx)(y,{message:s,keyName:a,esentials:c,readyFn:(e,s)=>{p.some((e=>7===e.seq))||E({message:"Are there any other types of products you\u2019re interested in today?",seq:7,type:"bot"}),p.find((e=>6===e.seq&&e.keyName===s)).selected.push(e)}}):null,7===r?(0,l.jsx)(j,{message:s,next:()=>{var e=[];p.filter((e=>6===e.seq&&e.keyName)).map((s=>{s.selected.map((a=>{var t=e.find((e=>e.key===s.keyName));return t?t.value.push(s.esentials[a]):e.push({key:s.keyName,value:[s.esentials[a]]}),t}))})),E({message:'<div>\n        <div>Based on your preferences we have curated a selection of pre-loved products easily delivered or in your area. </div>\n        <div style="margin: 10px"><a href="http://localhost:8099/build/target.html">Shop now!</a></div>\n        <div>\n        Thanks for thinking pre-loved!\n        </div>\n        </div>',seq:8,type:"bot"})}}):null,8===r?(0,l.jsx)(v,{message:s}):null]}),(0,l.jsx)(t.EbaySvg,{})]})},E=e=>{let{message:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"user-message",children:(0,l.jsx)("div",{children:s})}),(0,l.jsx)(t.EbaySvg,{})]})},w=e=>{let{messages:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"chat-messages",children:s.map((e=>"bot"===e.type?(0,l.jsx)("div",{className:"chat-message",children:(0,l.jsx)(k,{...e})},e.seq):(0,l.jsx)("div",{className:"chat-message",children:(0,l.jsx)(E,{...e})},e.seq)))}),(0,l.jsx)(t.EbaySvg,{})]})},q=()=>{const{data:e,onAddNewMessage:s,onAddNewMessages:a}=(0,d.useChats)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"chat-form",children:[(0,l.jsx)("input",{type:"text",onKeyDown:t=>{var n;13===t.keyCode&&(n=t.target.value,s({message:n,seq:e.length+1,type:"user"}),1==e.length&&setTimeout((()=>{a([{message:"Greetings",seq:3,type:"bot"}])}),1e3),t.target.value="")},className:"chat-input",id:"user-input",placeholder:"Ask me anything..."}),(0,l.jsx)("label",{htmlFor:"voice-input",className:"voice-upload",children:(0,l.jsx)(o.EbayIcon,{name:"microphone16"})}),(0,l.jsx)("input",{type:"file",accept:"image/*",capture:"camera",id:"photo-input",className:"photo-input"}),(0,l.jsx)("label",{htmlFor:"photo-input",className:"photo-upload",children:(0,l.jsx)(o.EbayIcon,{name:"camera16"})})]}),(0,l.jsx)(t.EbaySvg,{})]})};const D=()=>{const{data:e}=(0,d.useChats)(),[s,a]=(0,n.useState)([]);return(0,n.useEffect)((()=>{a(e)}),[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"chat-window",children:[(0,l.jsx)(c,{}),(0,l.jsx)(w,{messages:s}),(0,l.jsx)(q,{})]}),(0,l.jsx)(t.EbaySvg,{})]})}},4829:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var t=a(4935),n=a(387),r=a(935),l=a(6345);const i=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"header",children:(0,l.jsx)(r.A,{activeIndex:"contact"})}),(0,l.jsx)("section",{className:"py-5 shadow-sm index-forward",children:(0,l.jsx)("div",{className:"container",style:{paddingTop:"0px"},children:(0,l.jsx)(t.default,{children:(0,l.jsx)(n.default,{})})})})]})}}]);
//# sourceMappingURL=829.943f535f.chunk.js.map