{"version":3,"file":"static/js/209.f89b1ce9.chunk.js","mappings":"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","sources":["components/Admin/posts/PostsView.jsx","components/Admin/posts/PostsHook.jsx","components/Admin/posts/PostsContainer.jsx"],"sourcesContent":["import { Avatar } from \"antd\";\nimport { FixedSizeList } from \"react-window\";\nimport \"./style.css\";\nimport \"@ebay/skin\";\nimport { EbayAlertDialog } from \"@ebay/ui-core-react/ebay-alert-dialog\";\nimport { EbayDialogHeader } from \"@ebay/ui-core-react/ebay-dialog-base\";\n\nimport { useEffect, useState } from \"react\";\nimport { EbayIcon } from \"@ebay/ui-core-react/ebay-icon\";\nimport { EbaySvg } from \"@ebay/ui-core-react/ebay-svg\";\nimport { EbayButton } from \"@ebay/ui-core-react/ebay-button\";\nexport const AdminPostsView = ({ posts, onDeletePost }) => {\n  const [confirmDeleteVisible, setConfirmDeleteVisible] = useState(false);\n  const [deletedId, setDeletedId] = useState(0);\n  const deletePost = (id) => {\n    setDeletedId(id);\n    setConfirmDeleteVisible(true);\n  };\n  const navigateToEdit = (id) => {\n    window.location.href = `/admin/post/edit/${id}`;\n  };\n  const renderRow = ({ index, style }) => {\n    return (\n      <div>\n        <div style={{ ...style, ...{ display: \"flex\" } }}>\n          <div className=\"first-column\">\n            <a href={`/post/${posts[index].id}`}>\n              <Avatar size={40} src={posts[index][\"cover-image\"]} />\n            </a>\n          </div>\n          <div>\n            <div>\n              <a>{posts[index].title}</a>\n            </div>\n            <div>\n              <a style={{ fontSize: \"12px\", color: \"grey\" }}>\n                {posts[index][\"created-time\"]}\n              </a>\n            </div>\n          </div>\n\n          <div title=\"删除\" style={{ marginLeft: \"300px\" }}>\n            <EbayButton\n              size=\"small\"\n              onClick={() => navigateToEdit(posts[index].id)}\n            >\n              <EbayIcon\n                name=\"ai-spectrum-filled16-colored\"\n                style={{\n                  width: \"20px\",\n                  height: \"20px\",\n                }}\n              ></EbayIcon>\n            </EbayButton>\n            <EbayButton\n              priority=\"primary\"\n              variant=\"destructive\"\n              onClick={() => deletePost(posts[index].id)}\n            >\n              <EbayIcon\n                name=\"delete16\"\n                style={{\n                  width: \"20px\",\n                  height: \"20px\",\n                  cursor: \"pointer\",\n                }}\n              ></EbayIcon>\n            </EbayButton>\n          </div>\n        </div>\n\n        <EbaySvg />\n      </div>\n    );\n  };\n  return (\n    <>\n      <EbayAlertDialog\n        open={confirmDeleteVisible}\n        confirmText=\"删除\"\n        onConfirm={() => {\n          setConfirmDeleteVisible(false);\n          onDeletePost(deletedId);\n        }}\n        a11yClosetext=\"Close\"\n      >\n        <EbayDialogHeader>确定要删除当前文章吗？</EbayDialogHeader>\n        <p>删除后将不可见。</p>\n      </EbayAlertDialog>\n      <div className=\"list\">\n        <div className=\"summary\">\n          <Summary />\n        </div>\n        <FixedSizeList\n          height={window.innerHeight}\n          width={window.innerWidth - 100}\n          itemCount={posts.length}\n          itemSize={100}\n        >\n          {renderRow}\n        </FixedSizeList>\n      </div>\n    </>\n  );\n};\nexport const Summary = ({ posts = [] }) => {\n  const [latest, setLatest] = useState({});\n  useEffect(() => {\n    if (Array.isArray(posts)) {\n      posts.sort((a, b) => {\n        return new Date(b[\"created-time\"]) - new Date(a[\"created-time\"]);\n      });\n      setLatest(posts[0]);\n    }\n  }, []);\n  const nav = () => {\n    window.location.href = \"/admin/post/edit\";\n  };\n  return (\n    <div className=\"header-top bg-light\">\n      <h6>\n        当前共有{posts.length}文章, 最近一篇文章发表于:\n        {latest ? latest[\"created-time\"] : \"\"}\n        <EbayButton\n          onClick={nav}\n          size=\"small\"\n          priority=\"primary\"\n          style={{ marginLeft: \"10px\", float: \"right\" }}\n        >\n          新增\n        </EbayButton>\n      </h6>\n    </div>\n  );\n};\n\nAdminPostsView.Summary = Summary;\n","import { useEffect, useState } from \"react\";\nimport { get } from \"utils/api\";\nimport { AdminConstants } from \"utils/constants\";\n\nconst usePostsHook = () => {\n  const [posts, setPosts] = useState([]);\n  useEffect(() => {\n    const fetchPosts = async () => {\n      const result = await get(AdminConstants.POSTS_URI, [\n        {\n          key: \"useMock\",\n          value: \"true\",\n        },\n      ]);\n      result.sort((a, b) => {\n        return new Date(b[\"created-time\"]) - new Date(a[\"created-time\"]);\n      });\n      setPosts(result);\n    };\n    fetchPosts();\n  }, []);\n\n  return { posts };\n};\n\nexport default usePostsHook;\n","import { get } from \"utils/api\";\nimport { AdminConstants } from \"utils/constants\";\nimport { AdminPostsView } from \"./PostsView\";\nimport TopNav from \"components/Others/Head/TopNav\";\nimport usePostsHook from \"./PostsHook\";\n\nconst AdminPosts = () => {\n  const { posts } = usePostsHook();\n  const deletePost = async (id) => {\n    const result = await get(AdminConstants.POST_DELETE, [\n      {\n        key: \"id\",\n        value: id,\n      },\n    ]);\n    if (result && result.id) {\n      // reload the page\n      location.reload();\n    }\n  };\n  return (\n    <>\n      <TopNav activeIndex=\"post\" />\n      <AdminPostsView posts={posts} onDeletePost={deletePost}>\n        <AdminPostsView.Summary posts={posts} />\n      </AdminPostsView>\n    </>\n  );\n};\nexport default AdminPosts;\n"],"names":["AdminPostsView","_ref","posts","onDeletePost","confirmDeleteVisible","setConfirmDeleteVisible","useState","deletedId","setDeletedId","_jsxs","_Fragment","children","EbayAlertDialog","open","confirmText","onConfirm","a11yClosetext","_jsx","EbayDialogHeader","className","Summary","FixedSizeList","height","window","innerHeight","width","innerWidth","itemCount","length","itemSize","_ref2","index","style","display","href","concat","id","Avatar","size","src","title","fontSize","color","marginLeft","EbayButton","onClick","navigateToEdit","location","EbayIcon","name","priority","variant","deletePost","cursor","EbaySvg","_ref3","latest","setLatest","useEffect","Array","isArray","sort","a","b","Date","nav","float","usePostsHook","setPosts","async","result","get","AdminConstants","POSTS_URI","key","value","fetchPosts","AdminPosts","TopNav","activeIndex","POST_DELETE","reload"],"sourceRoot":""}