{"version":3,"file":"static/js/607.f400bd83.chunk.js","mappings":"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","sources":["components/Admin/posts/PostsView.jsx","components/Admin/posts/PostsHook.jsx","components/Admin/posts/PostsContainer.jsx"],"sourcesContent":["import { Avatar } from \"antd\";\r\nimport { FixedSizeList } from \"react-window\";\r\nimport \"./style.css\";\r\nimport \"@ebay/skin\";\r\nimport { EbayAlertDialog } from \"@ebay/ui-core-react/ebay-alert-dialog\";\r\nimport { EbayDialogHeader } from \"@ebay/ui-core-react/ebay-dialog-base\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { EbayIcon } from \"@ebay/ui-core-react/ebay-icon\";\r\nimport { EbaySvg } from \"@ebay/ui-core-react/ebay-svg\";\r\nimport { EbayButton } from \"@ebay/ui-core-react/ebay-button\";\r\nexport const AdminPostsView = ({ posts, onDeletePost }) => {\r\n  const [confirmDeleteVisible, setConfirmDeleteVisible] = useState(false);\r\n  const [deletedId, setDeletedId] = useState(0);\r\n  const deletePost = (id) => {\r\n    setDeletedId(id);\r\n    setConfirmDeleteVisible(true);\r\n  };\r\n  const navigateToEdit = (id) => {\r\n    window.location.href = `/admin/post/edit/${id}`;\r\n  };\r\n  const renderRow = ({ index, style }) => {\r\n    return (\r\n      <div>\r\n        <div style={{ ...style, ...{ display: \"flex\" } }}>\r\n          <div className=\"first-column\">\r\n            <a href={`/post/${posts[index].id}`}>\r\n              <Avatar size={40} src={posts[index][\"cover-image\"]} />\r\n            </a>\r\n          </div>\r\n          <div>\r\n            <div>\r\n              <a>{posts[index].title}</a>\r\n            </div>\r\n            <div>\r\n              <a style={{ fontSize: \"12px\", color: \"grey\" }}>\r\n                {posts[index][\"created-time\"]}\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <div title=\"删除\" style={{ marginLeft: \"300px\" }}>\r\n            <EbayButton\r\n              size=\"small\"\r\n              onClick={() => navigateToEdit(posts[index].id)}\r\n            >\r\n              <EbayIcon\r\n                name=\"ai-spectrum-filled16-colored\"\r\n                style={{\r\n                  width: \"20px\",\r\n                  height: \"20px\",\r\n                }}\r\n              ></EbayIcon>\r\n            </EbayButton>\r\n            <EbayButton\r\n              priority=\"primary\"\r\n              variant=\"destructive\"\r\n              onClick={() => deletePost(posts[index].id)}\r\n            >\r\n              <EbayIcon\r\n                name=\"delete16\"\r\n                style={{\r\n                  width: \"20px\",\r\n                  height: \"20px\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n              ></EbayIcon>\r\n            </EbayButton>\r\n          </div>\r\n        </div>\r\n\r\n        <EbaySvg />\r\n      </div>\r\n    );\r\n  };\r\n  return (\r\n    <>\r\n      <EbayAlertDialog\r\n        open={confirmDeleteVisible}\r\n        confirmText=\"删除\"\r\n        onConfirm={() => {\r\n          setConfirmDeleteVisible(false);\r\n          onDeletePost(deletedId);\r\n        }}\r\n        a11yClosetext=\"Close\"\r\n      >\r\n        <EbayDialogHeader>确定要删除当前文章吗？</EbayDialogHeader>\r\n        <p>删除后将不可见。</p>\r\n      </EbayAlertDialog>\r\n      <div className=\"list\">\r\n        <div className=\"summary\">\r\n          <Summary />\r\n        </div>\r\n        <FixedSizeList\r\n          height={window.innerHeight}\r\n          width={window.innerWidth - 100}\r\n          itemCount={posts.length}\r\n          itemSize={100}\r\n        >\r\n          {renderRow}\r\n        </FixedSizeList>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport const Summary = ({ posts = [] }) => {\r\n  const [latest, setLatest] = useState({});\r\n  useEffect(() => {\r\n    if (Array.isArray(posts)) {\r\n      posts.sort((a, b) => {\r\n        return new Date(b[\"created-time\"]) - new Date(a[\"created-time\"]);\r\n      });\r\n      setLatest(posts[0]);\r\n    }\r\n  }, []);\r\n  const nav = () => {\r\n    window.location.href = \"/admin/post/edit\";\r\n  };\r\n  return (\r\n    <div className=\"header-top bg-light\">\r\n      <h6>\r\n        当前共有{posts.length}文章, 最近一篇文章发表于:\r\n        {latest ? latest[\"created-time\"] : \"\"}\r\n        <EbayButton\r\n          onClick={nav}\r\n          size=\"small\"\r\n          priority=\"primary\"\r\n          style={{ marginLeft: \"10px\", float: \"right\" }}\r\n        >\r\n          新增\r\n        </EbayButton>\r\n      </h6>\r\n    </div>\r\n  );\r\n};\r\n\r\nAdminPostsView.Summary = Summary;\r\n","import { useEffect, useState } from \"react\";\r\nimport { get } from \"utils/api\";\r\nimport { AdminConstants } from \"utils/constants\";\r\n\r\nconst usePostsHook = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      const result = await get(AdminConstants.POSTS_URI, [\r\n        {\r\n          key: \"useMock\",\r\n          value: \"true\",\r\n        },\r\n      ]);\r\n      result.sort((a, b) => {\r\n        return new Date(b[\"created-time\"]) - new Date(a[\"created-time\"]);\r\n      });\r\n      setPosts(result);\r\n    };\r\n    fetchPosts();\r\n  }, []);\r\n\r\n  return { posts };\r\n};\r\n\r\nexport default usePostsHook;\r\n","import { get } from \"utils/api\";\r\nimport { AdminConstants } from \"utils/constants\";\r\nimport { AdminPostsView } from \"./PostsView\";\r\nimport TopNav from \"components/Others/Head/TopNav\";\r\nimport usePostsHook from \"./PostsHook\";\r\n\r\nconst AdminPosts = () => {\r\n  const { posts } = usePostsHook();\r\n  const deletePost = async (id) => {\r\n    const result = await get(AdminConstants.POST_DELETE, [\r\n      {\r\n        key: \"id\",\r\n        value: id,\r\n      },\r\n    ]);\r\n    if (result && result.id) {\r\n      // reload the page\r\n      location.reload();\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n      <TopNav activeIndex=\"post\" />\r\n      <AdminPostsView posts={posts} onDeletePost={deletePost}>\r\n        <AdminPostsView.Summary posts={posts} />\r\n      </AdminPostsView>\r\n    </>\r\n  );\r\n};\r\nexport default AdminPosts;\r\n"],"names":["AdminPostsView","_ref","posts","onDeletePost","confirmDeleteVisible","setConfirmDeleteVisible","useState","deletedId","setDeletedId","_jsxs","_Fragment","children","EbayAlertDialog","open","confirmText","onConfirm","a11yClosetext","_jsx","EbayDialogHeader","className","Summary","FixedSizeList","height","window","innerHeight","width","innerWidth","itemCount","length","itemSize","_ref2","index","style","display","href","concat","id","Avatar","size","src","title","fontSize","color","marginLeft","EbayButton","onClick","navigateToEdit","location","EbayIcon","name","priority","variant","deletePost","cursor","EbaySvg","_ref3","latest","setLatest","useEffect","Array","isArray","sort","a","b","Date","nav","float","usePostsHook","setPosts","async","result","get","AdminConstants","POSTS_URI","key","value","fetchPosts","AdminPosts","TopNav","activeIndex","POST_DELETE","reload"],"sourceRoot":""}